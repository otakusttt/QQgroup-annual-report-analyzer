# ============================================
# 存储模式配置
# ============================================

# 存储模式选择（可选）
# - json: 使用 JSON 文件存储（默认，无需 MySQL，适合本地个人使用）
# - mysql: 使用 MySQL 数据库存储（适合多用户、生产环境）
STORAGE_MODE=json


# ============================================
# MySQL 数据库配置（仅当使用 MySQL 数据库存储时需要）
# ============================================

# MySQL 主机地址
MYSQL_HOST=localhost

# MySQL 端口
MYSQL_PORT=3306

# MySQL 用户名
MYSQL_USER=root

# MySQL 密码
MYSQL_PASSWORD=your_password

# 数据库名称
MYSQL_DATABASE=qq_reports

# 字符集
MYSQL_CHARSET=utf8mb4


# ============================================
# Flask 应用配置
# ============================================

# Flask Secret Key（必需）
# 使用随机字符串，可用命令生成：python -c "import secrets; print(secrets.token_hex(32))"
FLASK_SECRET_KEY=your_secret_key_here_please_change_this

# Flask 运行环境
# development 或 production
FLASK_ENV=development

# Flask 监听端口
FLASK_PORT=5000

# 调试模式（开发环境可设为 true）
DEBUG=true


# ============================================
# CORS 配置
# ============================================

# 允许的前端域名（逗号分隔）
# 开发环境示例：http://localhost:5173,http://localhost:5000
# 生产环境示例：https://yourdomain.com,https://www.yourdomain.com
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:5000


# ============================================
# 文件上传配置
# ============================================

# 最大上传文件大小（MB）
MAX_UPLOAD_SIZE_MB=1024


# ============================================
# OpenAI 配置（可选）
# ============================================

# OpenAI API Key（如不使用 AI 功能可留空）
OPENAI_API_KEY=

# OpenAI API 基础地址（可选，使用代理或兼容服务时填写）
OPENAI_BASE_URL=

# OpenAI 模型名称（可选）
OPENAI_MODEL=


# ============================================
# AI 功能开关配置
# ============================================

# 是否启用 AI 锐评
AI_COMMENT_ENABLED=false

# 是否启用 AI 选词
AI_WORD_SELECTION_ENABLED=false


# ============================================
# 安全配置
# ============================================

# 【安全总开关】启用安全功能（true/false）
# - true: 启用速率限制、安全头等防护（生产环境推荐）
# - false: 禁用所有安全限制（仅本地个人使用）
SECURITY_ENABLED=false

# 【部署环境】影响默认安全策略（local/cloud）
# - local: 本地部署（个人电脑/内网，宽松策略）
# - cloud: 云端部署（公网服务器，严格策略）
DEPLOYMENT_ENV=local

# Redis 连接地址（用于分布式速率限制，可选）
# 留空则使用内存存储（适合单机部署）
# 示例：redis://localhost:6379
REDIS_URL=

# 前端 URL（用于图片生成等功能）
# 本地示例：http://localhost:5173
# 云端示例：https://yourdomain.com 或 http://your-ip:5000
FRONTEND_URL=http://localhost:5173


# ============================================
# 速率限制配置（详细）
# ============================================

# 【全局默认限制】
# 格式："每日次数 per day, 每小时次数 per hour"
# 设置为空字符串则禁用全局限制
# 本地推荐：1000 per day, 200 per hour
# 云端推荐：200 per day, 50 per hour
RATE_LIMIT_DEFAULT=200 per day, 50 per hour

# 【上传接口】/api/upload（数据敏感，严格限制）
# 本地推荐：100 per day, 20 per hour
# 云端推荐：10 per day, 5 per hour
# 设置为空则禁用此接口限制
RATE_LIMIT_UPLOAD=10 per hour

# 【完成报告】/api/finalize（处理敏感，中等限制）
# 本地推荐：200 per day, 50 per hour
# 云端推荐：20 per hour
RATE_LIMIT_FINALIZE=20 per hour

# 【查看报告】/api/reports/<id> GET（查询操作，宽松限制）
# 本地推荐：不限制（留空）
# 云端推荐：100 per hour
RATE_LIMIT_GET_REPORT=100 per hour

# 【报告列表】/api/reports GET（查询操作，宽松限制）
# 本地推荐：不限制（留空）
# 云端推荐：200 per hour
RATE_LIMIT_LIST_REPORTS=200 per hour

# 【生成图片】/api/reports/<id>/generate-image（CPU密集，中等限制）
# 本地推荐：100 per hour
# 云端推荐：30 per hour
RATE_LIMIT_GENERATE_IMAGE=30 per hour

# 【删除报告】/api/reports/<id> DELETE（敏感操作，中等限制）
# 本地推荐：200 per hour
# 云端推荐：50 per hour
RATE_LIMIT_DELETE_REPORT=50 per hour

# 速率限制IP白名单
# 防止访问api/health频率过高导致告警日志过多
RATE_LIMIT_IP_LIST={'127.0.0.1','::1'}

# ============================================
# 安全头配置（可选）
# ============================================

# 启用安全响应头（true/false）
# 只在云端部署时推荐启用，本地可以关闭
SECURITY_HEADERS_ENABLED=false

# X-Frame-Options（防止点击劫持）
# DENY / SAMEORIGIN / ALLOW-FROM uri
SECURITY_HEADER_X_FRAME_OPTIONS=DENY

# X-Content-Type-Options（防止 MIME 类型嗅探）
# nosniff
SECURITY_HEADER_X_CONTENT_TYPE_OPTIONS=nosniff

# X-XSS-Protection（XSS 过滤器）
# 1; mode=block
SECURITY_HEADER_X_XSS_PROTECTION=1; mode=block

# Referrer-Policy（引用来源策略）
# no-referrer / strict-origin-when-cross-origin 等
SECURITY_HEADER_REFERRER_POLICY=strict-origin-when-cross-origin

# Strict-Transport-Security（HSTS，仅 HTTPS）
# 格式：max-age=31536000; includeSubDomains
# 留空则不添加（HTTP 部署时必须留空）
SECURITY_HEADER_HSTS=


# ============================================
# 文件验证配置
# ============================================

# 启用文件名安全检查（true/false）
# 防止路径遍历攻击，云端部署必须启用
FILE_SECURITY_CHECK_ENABLED=true

# 允许的文件扩展名（逗号分隔）
ALLOWED_FILE_EXTENSIONS=json


